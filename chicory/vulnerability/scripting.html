<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>reply_with_details</title>

<script src="https://nplatonov.github.io/site_libs/header-attrs-2.7/header-attrs.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>






<link rel="stylesheet" href="https://nplatonov.github.io/site_libs/common.css" type="text/css" />
<link rel="stylesheet" href="https://nplatonov.github.io/site_libs/html_vignette.css" type="text/css" />




</head>

<body>







<div id="data-processing" class="section level4">
<h4>Data processing</h4>
<p>….</p>
<blockquote>
<p>N. Platonov then prepared files for the Marxan runs using a purpose-made routineand initiated Marxan tests. The routine (a script in R programming language (version 3.6) (R Core Team, 2020) was used for:</p>
</blockquote>
<ul>
<li><blockquote>
<p>Initialising the Marxan grid of planning units.</p>
</blockquote>
<p>Здесь имеется в виду генерирование квадратной 30 км сетки в равновеликой проекции Ламберта (полярная, северное полушарие) с нулевым меридианом 0°, ее обрезка по границе Study Area.</p>
<div class="figure">
<img src="assets/b10e35d7~chunk.png" alt="Study Area" width="326" />
<p class="caption centered">
Study Area
</p>
</div>
<div class="figure">
<img src="assets/3174bb8e~chunk.png" alt="Дополнительная информация: расстояние в км от центра ячейки до береговой линии (inland) и доля приходящейся на сушу площади ячейки (coverland)" width="700" />
<p class="caption">
Дополнительная информация: расстояние в км от центра ячейки до береговой линии (inland) и доля приходящейся на сушу площади ячейки (coverland)
</p>
</div>
<p>Необходимый атрибут - <code>ID</code>, который используется для идентификации ячейки в конфигурационных файлах <code>*.dat</code> Марксана. Для Марксана этот файл не нужен, но зато необходим для визуализации результатов Марксана.</p></li>
<li><blockquote>
<p>Preparing the bounding file from Marxan grid.</p>
</blockquote>
<p>Это файл <code>bound.dat</code>.</p>
<pre><code>        id1   id2 boundary
1     10001 10001       60
2     10002 10002       30
3     10003 10003       30
45873 32678 32674       30
45874 32677 32676       30
45875 32678 32677       30</code></pre>
<p>Для его подготовки формируется пространственный файл с линейной пространственной геометрией, атрибутивная таблица которого содержит информацию об отношении соседних ячеек друг к другу.</p>
<div class="figure">
<img src="assets/80fb952e~chunk.png" alt="Атрибуты, используемые для определения отношений между соседними ячейками" width="528" />
<p class="caption centered">
Атрибуты, используемые для определения отношений между соседними ячейками
</p>
</div></li>
<li><blockquote>
<p>GIS data resampling to Marxan grid (import):</p>
</blockquote>
<p>Эксперты предоставляют данные в виде векторных ГИС файлов с различной геометрией (точка, линия, полигон), которые нужно преобразовать в полигоны, образованные ячейками Марксана, при этом сохранив суммарное значения атрибута Amount.</p>
<ul>
<li><blockquote>
<p>Data attribute and geometry management for update only changed source.</p>
</blockquote>
<p>Подготовка данных – итерационный процесс из-за изменений структуры данных (исправление ошибок в геометрии, исправление ошибок в атрибутивной таблице, повышение качества предоставляемых данных, появление новых источников данных). Так как resampling сложной геометрии может занимать много времени, то для обновленного набора данных предварительно анализируется изменение для каждого элемента набора, и если изменений нет, то resampling не делается, а элемент данных берется из предыдущего набора.</p></li>
<li><blockquote>
<p>Preferred manipulation with spatial geometry of vector data; interim rasterization was used only for cases when geometry was acceptable generally, but invalid and un-repaired for operation of spatial intersection.</p>
</blockquote>
<p>В проекте “MPA Russia” resampling осуществлялся методом палетки (промежуточная растеризация в сетку с промежуточной ячейкой с отношением сторон 1:5 к исходной). В этом проекте осуществлялось пересечение векторных объектов (обычно полигонов исходных данных и полигонов сети ячеек). В тех случаях, когда не удавалось построить пересечение геометрий либо из-за ошибок в геометрии, которые не получалось исправить, либо из-за неверной геометрии, осуществлялась промежуточная растеризация.</p></li>
</ul></li>
<li><blockquote>
<p>Conditional assigning “cost” and “status” data fields for planning units in requesting scenarios (usually for the later ArcNet analysis versions).</p>
</blockquote>
<p>Для некоторых сценариев с помощью дополнительного ГИС-слоя задавались условия, по которым изменялся статус или стоимость ячеек, с которыми этот слой перекрывался. Для поздних версий проекта это слой <code>CAFFandRussiaFederalCanada.shp</code>, обязывающий Марсан принудительное включение ячеек с перекрытием более 50% этим слоем.</p></li>
<li><blockquote>
<p>Batching Marxan running:</p>
</blockquote>
<p>Для улучшения производительности произведена направленная на уменьшение пользовательского взаимодействия оптимизация с помощью пакетной обработки</p>
<ul>
<li><blockquote>
<p>Regarding to scenario parameters, on-the-fly transformation of basic template, which contains complete ArcNet data set in Marxan input formats.</p>
</blockquote>
<p>Для запуска Марксана необходим набор определенных файлов. Для различных сценариев некоторые файлы не меняются совсем, некоторы изменяются частично. Поэтому был подготовлен набор файлов, используемый как шаблон, и перед запуском нового сценария все необходимые изменения в шаблон вносились «на лету» по файлу с метаданными.</p></li>
<li><blockquote>
<p>Using explicit random seed for reproductivity.</p>
</blockquote>
<p>В основном конфигурационном файле Марксана <code>input.dat</code> есть параметр <code>RANDSEED</code>, для генератора псевдослучайных чисел, который используется для формирования последовательности выбираемых ячеек на каждой итерации. Если задать значение <code>-1</code>, то Марксан сам выбирает, какую генерировать последовательность псевдослучайных чисел. В проекте при формировании сценария для <code>RANDSEED</code> задавалось трехзначное число единожды, поэтому сколько бы раз не запускался Марксан на различных компьютерах, всегда получался один и тот же результат. При случайном повторном запуске сценария это позволяет получить те же результаты.</p></li>
<li><blockquote>
<p>Transform Marxan output to GIS data (export).</p>
</blockquote>
<p>Преобразование табличных результатов Марксан в формат ГИС, используемый для визуализации и дальнейшего анализа.</p></li>
</ul></li>
<li><blockquote>
<p>Multipanel data visualisation of Marxan output and derived statistics.</p>
</blockquote>
<p>После каждого запуска сценария формировался графический файл с несколькими панелями, чтобы охватить взглядом результаты нескольких прогонов. На каждой панели приведена статистическая сводка прогона в виде текстовой аннотации.</p>
<div class="figure">
<img src="assets/740ce575~chunk.png" alt="Пример представления результатов для сценария с 20 прогонами." width="1056" />
<p class="caption centered">
Пример представления результатов для сценария с 20 прогонами.
</p>
</div>
<p>Также формировался графический файл с множеством панелей, как результат лучшего прогона соотносится с геометрией и содержимым (Amount) охраняемых сущностей (здесь не показано из-за малого масштаба панелей).</p></li>
<li><blockquote>
<p>Batch bootstrapping of Marxan parameters</p>
</blockquote>
<p>Бутстраппинг (калибровка) - формирование набора отклонений некоторых входных параметров Марксана от их начальных значений с целью формирования новых значений, при которых результаты прогона соответствуют целям проекта по группировке выбираемых Марксаном ячеек и обеспечивают устойчивость выбора групп при различных прогонах.</p>
<ul>
<li><blockquote>
<p>On-the-fly transformation of basic template.</p>
</blockquote>
<p>Использована пакетная обработка по формированию конфигурационных файлов Марксана на основе шаблона и изменяемых значений входных параметров</p></li>
<li><blockquote>
<p>Visualisation</p>
</blockquote>
<p>Построение графического представления результатов бутстраппинга для выбора значений изменяемых параметров на основе визуального анализа.</p>
<p class="centered-image"><img src="assets/15410266~chunk.png" width="360" /></p></li>
</ul></li>
<li><blockquote>
<p>Static (PNG) and interactive (HTML) representation of Marxan output for end-users.</p>
</blockquote>
<div class="figure">
<img src="assets/81bdbd7e~chunk.png" alt="Пример статического представления результатов" width="360" />
<p class="caption centered">
Пример статического представления результатов
</p>
</div>
<div class="figure">
<iframe src="assets/e8725070~chunk.html" width="646.08" height="400px"></iframe>
<p class="caption centered">
Пример интерактивного представления результатов
</p>
</div></li>
</ul>
</div>



<!-- code folding -->



</body>
</html>
