Я решила сделать эту домашку всё же в QGIS, потому что это мне как будто интуитивно ближе, чем кодить в R (и Женя согласилась мне помочь).

![][1]

Данные содержат 5 слоёв, из которых нам нужны, видимо, те два, описание которых не (0). Выгружаем их в проект:

![][2]

Подложим под это дело карту для наглядности и поменяем проекцию на подходящую:

![][3]

В целом трек можно поделить на ту часть, где лыжник выходил на круги, и собственно круги. Разбивку произведём с помощью создания нового shape-файла. В режиме редактирования нарисуем там полигон, который будет перекрывать какую-то из частей, выделенных нами в треке (либо подход от раздевалки к трассе, либо круги). Какую именно часть -- неважно, потому что нам надо раскусить трек надвое, и неважно, с какой стороны это делать:

![][4]

![][5]

Задаём параметры обрезки -- слой, из которого будем вырезать (т.е. трек) и слой наложения, и создаём новый слой -- кусочек трека:

![][6]

В отличие от меня, кугис хорошо справляется с поставленной задачей:

![][7]

![][8]

Созданный слой «результат обрезки» содержит фрагмент трека, лежащий на пути от раздевалки до трассы:

![][9]

Теперь, чтобы выделить уже круги, повторим всё то же самое, но воспользовавшись другим инструментом, разностью:![][10]

![][11]\
![][12]

С полученными слоями «разность» и «результат обрезки» можно оперировать.

У них есть таблицы атрибутов, в них можно создать поле, в котором функция посчитает длину выбранного отрезка трека. Сперва рассчитаем длину «разности» (у нас это круги, которые намотал наш спортсмен):

![][13]

![][14]

![][15]

![][16]Длина кругов в общем вышла без малого 9 километров:\
![][17]

Проделаем то же самое для раздевалочного пути, и получим что-то около восьмисот метров:\
![][18]

Скорее всего, если лыжник мотал свои круги по одной и той же трассе, а потом возвращался с них в ту же раздевалку, где бросил свои вещи (а не погнал на лыжах прямиком домой), то мы можем себе позволить допущение, что круги были одинаковой длины, и пути раздевалка-трек и обратно -- тоже сопоставимы.

**Итого получаем, что средняя длина круга -- 8973/2=4486,5м.\
**

Все остальные данные можно найти в таблице атрибутов слоя с точками маршрута.

![][19]

Например, там есть время.

**Время начала и окончания круга можно узнать**, вызвав соответствующие точки, и заглянув в их атрибуты:\
Круг1 начало:\
![][20]

Круг1 окончание и начало круга2:

![][21]

Окончание круга2:\
![][22]

**Средняя скорость прохождения круга**\
Что ж, в таблице атрибутов, как говорят коллеги, есть просто столбец со скоростями, но у меня его почему-то нет, к тому же это читерство. Вместо этого сделаем вот как.\
Длина круга, как мы помним - 4486,5м.\
Допустим, это круг 1. Время начала его прохождения - 11:09:30, время окончания -- 11:36:24. То есть за 00:26:54 (1494 сек) лыжник делает 4486,5м, и его скорость получается около 3м/с, то есть 10.8 км/ч.\
Прохождение круга 2 заняло 1622 сек, средняя скорость примерно такая же. 2,76м/c = 9.936км/ч.

Даже отсюда уже видно, что движение было не совсем одинаковым, потому что средние скорости отличаются.

Из общих соображений мы знаем, что GPS пишет координаты более-менее через равные промежутки времени, и таблица атрибутов слоя с точками даёт нам подтверждение этому -- интервал между регистрациями позиции лыжника составляет 5-6сек:

![][23]

Между тем мы видим, что точки трека расположены весьма неравномерно. Нетрудно сделать вывод, что там, где точки расположены чаще, лыжник двигался медленнее (путь из/в раздевалку, некоторые отдельные участки кругов), в то время как там, где точки реже, скорость бегуна была выше (круги):\
![][24]

**Максимальное удаление от базы**

К счастью для таких простых людей, как я, в QGIS есть линейка, которой можно измерить расстояние «вручную»: ![][25]

![][26]

Расстояние получается что-то около 780 м.

  [1]: ./media/image1.png {width="6.504222440944882in" height="3.4538462379702537in"}
  [2]: ./media/image2.png {width="6.553600174978127in" height="3.0310181539807526in"}
  [3]: ./media/image3.png {width="6.498771872265967in" height="3.4384623797025373in"}
  [4]: ./media/image4.png {width="6.498771872265967in" height="2.8923075240594924in"}
  [5]: ./media/image5.png {width="6.498771872265967in" height="3.4384623797025373in"}
  [6]: ./media/image6.png {width="6.498771872265967in" height="3.4384612860892387in"}
  [7]: ./media/image7.png {width="6.501549650043745in" height="3.4230774278215224in"}
  [8]: ./media/image7.png {width="6.716360454943132in" height="0.7538462379702537in"}
  [9]: ./media/image8.png {width="6.754803149606299in" height="2.523687664041995in"}
  [10]: ./media/image9.png {width="6.4959251968503935in" height="3.4624278215223097in"}
  [11]: ./media/image10.png {width="6.4959251968503935in" height="3.456648075240595in"}
  [12]: ./media/image11.png {width="6.4959251968503935in" height="2.1213877952755906in"}
  [13]: ./media/image12.png {width="6.4959251968503935in" height="3.4335258092738408in"}
  [14]: ./media/image13.png {width="6.4959251968503935in" height="3.439306649168854in"}
  [15]: ./media/image14.png {width="6.4959251968503935in" height="3.4450863954505686in"}
  [16]: ./media/image15.png {width="6.4959251968503935in" height="3.4566469816272964in"}
  [17]: ./media/image16.png {width="5.704498031496063in" height="1.942199256342957in"}
  [18]: ./media/image17.png {width="4.616392169728784in" height="1.4721041119860017in"}
  [19]: ./media/image18.png {width="6.837372047244094in" height="2.5544553805774277in"}
  [20]: ./media/image19.png {width="5.824857830271216in" height="3.2701093613298338in"}
  [21]: ./media/image20.png {width="6.017718722659668in" height="3.0792082239720036in"}
  [22]: ./media/image21.png {width="6.507494531933508in" height="3.7117705599300086in"}
  [23]: ./media/image22.png {width="3.6309733158355204in" height="2.6227766841644793in"}
  [24]: ./media/image23.png {width="5.536053149606299in" height="2.93413167104112in"}
  [25]: ./media/image24.png {width="1.4808158355205598in" height="1.0926104549431321in"}
  [26]: ./media/image25.png {width="6.496653543307087in" height="3.4371259842519684in"}
